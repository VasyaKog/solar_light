:root{
    --bg: #bfe1ff;

    /* ✅ статичні розміри (px) + контроль через брейкпойнти */
    --tileW: 200px;
    --tileH: 220px;

    --gapX: 90px;
    --rowGap: 96px;

    --padX: 24px;
    --padY: 24px;

    --centerW: 360px;
    --centerH: 210px;

    --radius: 18px;
    --brd: #d6dde6;
    --tileBg: #e6f2ff;
    --text: #0f172a;
}

*{ box-sizing: border-box; }
html, body{ height: 100%; margin: 0; }

body{
    background: var(--bg);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color: var(--text);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 32px;
}

/* ===== ROOT ===== */
.dashboard{
    position: relative;
    min-height: 100vh;
    padding: var(--padY) var(--padX);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    width: 100%;
}

/* ===== LINES (two columns) ===== */
.lines{
    position: relative;
    z-index: 2;

    display: flex;
    justify-content: space-between;
    align-items: stretch;
    gap: var(--gapX);

    flex: 1;
    width: 100%;
}

/* columns */
.block-line-1,
.block-line-2{
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    gap: 0;
    min-width: 0;
}

/* rows */
.row{
    display: flex;
    gap: var(--rowGap);
    align-items: center;
}

.row-top,
.row-bot{
    justify-content: center;
}

/* title */
.line-title-wrap{
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
}

.line-title{
    margin: 0;
    font-weight: 900;
    font-size: 26px;
    letter-spacing: 0.02em;
    text-transform: uppercase;
}

/* ===== MID ROW: force empty center slot ===== */
.row-mid{
    width: 100%;
    justify-content: space-between;
}

/* ===== TILE BASE ===== */
.tile{
    width: var(--tileW);
    min-height: var(--tileH);
    border-radius: var(--radius);
    background: var(--tileBg);
    border: 1px solid var(--brd);
    padding: 12px;

    position: relative;
    z-index: 2;
    display: flex;
    flex-direction: column;
    gap: 8px;
    align-items: stretch;
    text-align: left;
    transition: none;
}
.tile-head{
    width: 100%;
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: wrap;
    row-gap: 6px;
}

.tile-label{
    font-weight: 900;
    font-size: 14px;
    letter-spacing: 0.02em;
    text-align: left;
    text-transform: uppercase;
    line-height: 1.1;
    max-width: 100%;
    word-break: break-word;
    hyphens: auto;
}

.tile-status{
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-height: 26px;
    align-self: flex-start;
}

.tile-icon{
    width: 100%;
    height: 86px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #0f172a;
    background: #eef6ff;
    border-radius: 14px;
    border: 1px solid #e5e7eb;
    flex: 1;
    min-height: 86px;
    align-self: center;
    position: relative;
}

.tile-icon-svg{
    width: 100%;
    height: 100%;
    stroke: currentColor;
    stroke-width: 2;
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
}
.tile-icon-img{
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.tile-metric{
    margin-top: auto;
    display: flex;
    align-items: baseline;
    gap: 8px;
    justify-content: center;
}

.tile-value{
    font-weight: 900;
    font-size: 32px;
    line-height: 1;
}

.tile-icon-soc{
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    color: #0f172a;
    font-weight: 800;
}

.tile-value-sm{
    font-weight: 800;
    font-size: 30px;
    line-height: 1;
}

.tile-unit{
    font-weight: 800;
    font-size: 14px;
    opacity: 0.7;
}

.tile-unit-sm{
    font-weight: 700;
    font-size: 14px;
    opacity: 0.65;
}

/* ===== COLLEGE (background center) ===== */
.college-metric{
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;

    z-index: 1;
    pointer-events: none;
}

.college-note{
    position: absolute;
    top: 16px;
    left: 50%;
    transform: translateX(-50%);
    font-weight: 900;
    font-size: 50px;
    letter-spacing: 0.02em;
    text-transform: uppercase;
    color: #0f172a;
    background: #e6f2ff;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 8px 14px;
    max-width: 520px;
    text-align: center;
    line-height: 1.2;
}

.college-img{
    width: var(--centerW);
    height: var(--centerH);
    border-radius: 18px;
    background-size: contain;
    background-image: url("./assets/HPK.png");
    background-repeat: no-repeat;
    background-position: center;
}

.college-kw{
    margin-top: 12px;
    width: 460px;
    text-align: center;

    font-weight: 900;
    font-size: 40px;
    line-height: 1;

    background: #e6f2ff;
    border: 1px solid #e5e7eb;
    border-radius: 16px;
    padding: 14px 18px;
}

/* ===== LOADING OVERLAY ===== */
.loading-overlay{
    position: fixed;
    inset: 0;
    z-index: 9999;

    display: flex;
    align-items: center;
    justify-content: center;

    background: #bfe1ff;
}

.loading-overlay.hidden{ display: none; }

.loading-box{
    text-align: center;
    padding: 28px 32px;
    border-radius: 18px;
    background: #f2f7ff;
    border: 1px solid #dde3ea;
    min-width: 260px;
}

.loading-title{
    font-size: 20px;
    font-weight: 900;
    margin-bottom: 6px;
}

.loading-sub{
    font-size: 14px;
    font-weight: 700;
    opacity: 0.8;
}


/* ===== STATIC BREAKPOINTS (no clamp/calc) ===== */
@media (max-width: 1700px){
    :root{
        --tileW: 190px;
        --tileH: 210px;
        --gapX: 70px;
        --rowGap: 80px;
        --centerW: 330px;
        --centerH: 200px;
    }

    .line-title{ font-size: 24px; }
    .tile-icon{ height: 78px; min-height: 78px; }
    .tile-value{ font-size: 30px; }
    .college-note{ font-size: 44px; }
    .college-kw{ width: 420px; font-size: 36px; }
}

@media (max-width: 1500px){
    :root{
        --tileW: 180px;
        --tileH: 200px;
        --gapX: 60px;
        --rowGap: 72px;
        --centerW: 310px;
        --centerH: 190px;
    }

    .line-title{ font-size: 22px; }
    .tile-label{ font-size: 13px; }
    .tile-icon{ height: 72px; min-height: 72px; }
    .tile-value{ font-size: 28px; }
    .college-note{ font-size: 40px; padding: 6px 10px; }
    .college-kw{ width: 380px; font-size: 32px; }
}

@media (max-width: 1300px){
    :root{
        --tileW: 170px;
        --tileH: 190px;
        --gapX: 48px;
        --rowGap: 60px;
        --centerW: 280px;
        --centerH: 175px;
    }

    .line-title{ font-size: 20px; }
    .tile-label{ font-size: 12px; }
    .tile-icon{ height: 64px; min-height: 64px; }
    .tile-value{ font-size: 26px; }
    .college-note{ font-size: 34px; }
    .college-kw{ width: 340px; font-size: 28px; }
}

@media (max-width: 1100px){
    :root{
        --tileW: 160px;
        --tileH: 180px;
        --gapX: 36px;
        --rowGap: 48px;
        --centerW: 250px;
        --centerH: 160px;
    }

    .line-title{ font-size: 18px; }
    .tile-label{ font-size: 11px; }
    .tile-icon{ height: 58px; min-height: 58px; }
    .tile-value{ font-size: 24px; }
    .college-note{ font-size: 28px; }
    .college-kw{ width: 300px; font-size: 24px; }
}

@media (max-width: 1040px) and (min-width: 821px){
    :root{
        --tileW: 150px;
        --tileH: 170px;
        --gapX: 28px;
        --rowGap: 40px;
        --centerW: 220px;
        --centerH: 150px;
    }

    .line-title{ font-size: 16px; }
    .tile-label{ font-size: 11px; }
    .tile-icon{ height: 54px; min-height: 54px; }
    .tile-value{ font-size: 22px; }
    .college-note{ font-size: 26px; }
    .college-kw{ width: 260px; font-size: 22px; }
}

/* ===== WIDE-ISH, SHORT SCREENS (e.g. 918x562) ===== */
@media (max-width: 1020px) and (min-width: 900px) and (max-height: 620px){
    :root{
        --tileW: 140px;
        --tileH: 150px;
        --gapX: 24px;
        --rowGap: 32px;
        --padX: 16px;
        --padY: 12px;
        --centerW: 220px;
        --centerH: 130px;
    }

    .line-title{ font-size: 16px; }
    .line-title-wrap{ gap: 8px; }
    .tile{ padding: 8px; }
    .tile-icon{ height: 48px; min-height: 48px; }
    .tile-value{ font-size: 20px; }
    .college-note{ font-size: 20px; padding: 6px 10px; }
    .college-kw{ width: 300px; font-size: 22px; padding: 8px 10px; }
}

/* ===== MOBILE (один стовпець + плитки на всю ширину) ===== */
@media (max-width: 820px){
    body{
        align-items: flex-start;
        justify-content: flex-start;
        padding: 16px;
    }

    .lines{
        margin-top: 30px;
        flex-direction: column;
        align-items: stretch;
        height: auto;
    }

    .block-line-1,
    .block-line-2{
        gap: 14px;
        justify-content: flex-start;
    }

    .row{
        flex-direction: column;
        align-items: stretch;
        gap: 14px;
    }

    /* ✅ плитки на всю ширину */
    .tile{
        width: 100%;
        min-height: 140px;
        padding: 10px;
    }

    .tile-icon{
        height: 56px;
        min-height: 56px;
    }

    .tile-value{ font-size: 28px; }
    .tile-unit{ font-size: 12px; }
    .tile-value-sm{ font-size: 24px; }
    .tile-unit-sm{ font-size: 12px; }
    .tile-label{ font-size: 14px; }

    .tile-status::before{
        font-size: 11px;
    }

    .row-mid{
        padding-left: 0 !important;
        padding-right: 0 !important;
    }

    .college-metric{
        position: static;
        pointer-events: auto;
        margin-top: 16px;
    }

    .college-note{
        top: 8px;
        font-size: 20px;
        padding: 6px 10px;
    }

    .college-kw{
        width: 100%;
        font-size: 24px;
    }

    .wiring{
        display: none;
    }
}

@media (max-width: 900px) and (min-width: 550px) {
    .tile-icon { width: 50%; }
}

@media (max-width: 550px) and (min-width: 450px) {
    .tile-icon { width: 75%; }
}

/* ===== SHORT SCREENS (before single column) ===== */
@media (max-height: 760px) and (min-width: 916px){
    body{
        padding: 24px;
    }

    :root{
        --tileH: 160px;
        --rowGap: 26px;
        --centerH: 150px;
    }

    .tile{ padding: 8px; }
    .tile-icon{ height: 58px; min-height: 58px; }
    .tile-value{ font-size: 22px; }
    .college-kw{ font-size: 26px; padding: 10px 12px; }
}

@media (max-height: 700px) and (min-width: 820px){
    body{
        padding: 22px;
    }

    :root{
        --tileH: 145px;
        --rowGap: 18px;
        --centerH: 130px;
        --padY: 12px;
    }

    .line-title{ font-size: 16px; }
    .line-title-wrap{ gap: 6px; }
    .tile-label{ font-size: 11px; }
    .tile{ padding: 6px; }
    .tile-icon{ height: 48px; min-height: 48px; }
    .tile-value{ font-size: 18px; }
    .tile-value-sm{ font-size: 20px; }
    .tile-unit, .tile-unit-sm{ font-size: 11px; }
    .college-note{ font-size: 20px; padding: 5px 8px; }
    .college-kw{ width: 280px; font-size: 20px; padding: 8px 10px; }
}

@media (max-height: 640px) and (min-width: 820px){
    body{
        padding: 20px;
    }

    :root{
        --tileH: 130px;
        --rowGap: 14px;
        --centerH: 115px;
        --padY: 10px;
    }

    .line-title{ font-size: 14px; }
    .line-title-wrap{ gap: 4px; }
    .tile-label{ font-size: 10px; }
    .tile{ padding: 5px; }
    .tile-icon{ height: 42px; min-height: 42px; }
    .tile-value{ font-size: 16px; }
    .tile-value-sm{ font-size: 18px; }
    .tile-unit, .tile-unit-sm{ font-size: 10px; }
    .college-note{ font-size: 18px; padding: 4px 8px; }
    .college-kw{ width: 260px; font-size: 18px; padding: 6px 8px; }
}

/* ===== TILE STATE (connection) ===== */
.tile[data-state]{
    overflow: hidden;
}

/* badge */
.tile-status::before{
    font-size: 12px;
    font-weight: 900;
    letter-spacing: 0.02em;

    padding: 6px 10px;
    border-radius: 999px;

    border: 1px solid #dde3ea;
    background: #f2f7ff;
    color: #0f172a;

    content: "";
    display: none;
    align-items: center;
    justify-content: center;
}

/* states */
.tile[data-state="ok"]{
    border-color: #d6dde6;
}

.tile[data-state="loading"]{
    filter: none;
}

.tile[data-state="loading"] .tile-status::before{
    content: "Звʼязок…";
    background: #dbeafe;
    border-color: #93c5fd;
    color: #1e40af;
    display: inline-flex;
}

.tile[data-state="offline"]{
    border-color: #fca5a5;
    background: #f3f6fb;
}

.tile[data-state="offline"] .tile-status::before{
    content: "Офлайн";
    background: #fee2e2;
    border-color: #fca5a5;
    color: #991b1b;
    display: inline-flex;
}

.tile[data-state="waiting"]{
    border-color: #bfdbfe;
    background: #eef6ff;
}

.tile[data-state="waiting"] .tile-status::before{
    content: "Очікування";
    background: #dbeafe;
    border-color: #bfdbfe;
    color: #1e40af;
    display: inline-flex;
}

.tile[data-state="charging"]{
    border-color: #6ee7b7;
    background: #edf4ff;
}

.tile[data-state="charging"] .tile-status::before{
    content: "Заряджання";
    background: #dcfce7;
    border-color: #86efac;
    color: #065f46;
    display: inline-flex;
}

.tile[data-state="discharging"]{
    border-color: #fdba74;
    background: #edf4ff;
}

.tile[data-state="discharging"] .tile-status::before{
    content: "Розряджання";
    background: #ffedd5;
    border-color: #fdba74;
    color: #7c2d12;
    display: inline-flex;
}

.tile[data-state="generating"]{
    border-color: #fcd34d;
    background: #edf4ff;
}

.tile[data-state="generating"] .tile-status::before{
    content: "Генерація";
    background: #fef3c7;
    border-color: #fcd34d;
    color: #78350f;
    display: inline-flex;
}

.tile[data-state="import"]{
    border-color: #93c5fd;
    background: #edf4ff;
}

.tile[data-state="import"] .tile-status::before{
    content: "Імпорт";
    background: #dbeafe;
    border-color: #93c5fd;
    color: #1e40af;
    display: inline-flex;
}

.tile[data-state="export"]{
    border-color: #5eead4;
    background: #edf4ff;
}

.tile[data-state="export"] .tile-status::before{
    content: "Експорт";
    background: #ccfbf1;
    border-color: #5eead4;
    color: #134e4a;
    display: inline-flex;
}

.tile[data-state="no-grid"]{
    border-color: #fca5a5;
    background: #eef6ff;
}

.tile[data-state="no-grid"] .tile-status::before{
    content: "Відсутня";
    background: #fee2e2;
    border-color: #fca5a5;
    color: #991b1b;
    display: inline-flex;
}

.tile[data-role="load"][data-state] .tile-status::before{
    display: none;
}

.tile[data-role="load"][data-state="offline"] .tile-status::before{
    display: inline-flex;
}

/* ===== WIRES ===== */
.wiring{
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 1;
}

.trunk{
    position: absolute;
    width: 4px;
    background: #7b8798;
    border-radius: 999px;
    z-index: 2;
}

.wire{
    position: absolute;
    height: 4px;
    background: #6c788a;
    border-radius: 999px;
    z-index: 2;

    transition: none;
}

.wire.wire--offline{
    opacity: 0.18;
}

.hub{
    position: absolute;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: #5b6678;
    border: 2px solid #f2f7ff;
    z-index: 3;
}
